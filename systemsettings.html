<!DOCTYPE html>
<html lang="en">
  <head>
    <title>System Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" type="image/x-icon" href="Icons/favicon.svg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
</head>
<body>
<!--navagation bar-->
<ul class="topnav">
  <li><a href="/">Home<span class="homeicon"></span></a></li>
  <li class="dropdown" style="float: right; align-content: center;">
      <a href="javascript:void(0)" class="dropbtn"><span class="settingicon"></span></a>
      <div class="dropdown-content">
          <a href="alarmsettings.html"><span class="alarmicon"></span><span>Alarm</span></a>
          <a href="wifisettings.html"><span class="wifiicon"></span>Wifi</a>
          <a href="systemsettings.html"><span class="systemicon"></span>System</a>
          <a href="about.html"><span class="abouticon"></span>About</a>
      </div>
  </li>
</ul>

<header><h2 class="systemsetting">Settings Page</h2></header>

<section>
  <div>
    <table class="ntptable">
      <tr class="ntptime">
        <th><span class="clockicon"></span></th>
        <th><span>NTP Time :</span></th>
        <th><span class="text" id="time">%TIME%</span></th>
        <th><span class="text" id="ampm" style="font-size: small;">%AMPM%</span></th>
      </tr>
      <tr class="ntptime">
        <th><span class="dateicon"></span></th>
        <th><span class="text">NTP Date : </span></th>
        <th><span class="text" id="date">%DATE%</span></th>
        <th></th>
      </tr>
      <tr class="rtctime">
        <th><span class="clockicon"></span></th>
        <th><span class="text">RTC Time : </span></th>
        <th><span class="text" id="timertc">%TIMERTC%</span></th>
        <th><span class="text" id="ampmRTC" style="font-size: small;">%AMPMRTC%</span></th>
      </tr>
      <tr class="rtctime">
        <th><span class="dateicon"></span></th>
        <th><span class="text">RTC Date : </span></th>
        <th><span class="text" id="datertc">%DATERTC%</span></th>
        <th></th>
      </tr>
    </table>
  </div>
</section>

<section class="updatesection">
  <div class="updatetime">
    <form action="/updatertc">
      <input type="datetime-local" id="datetimeRTC" name="datetimeRTC" onchange="updateUPDRTC(this)"><br><br>
      <input type="submit" value="Update RTC" class="updRTC">
    </form>
  </div>
  <br>
  <div class="syncrtc">
    <form action="/syncrtc">
      <input type="submit" value="Sync RTC to NTP" class="sync" id="sync" name="sync">
    </form>
  </div>
  <div>
</section>

<section>
<div class="slidecontainer">
  <input type="range" onchange="updateSliderPWM(this)" min="0" max="255" value="%SILDERVALUE%" class="slider" id="pwmSlider">
  <p class="mainsetting2">Brightness: <span id="textSliderValue"></span>&percnt;</p>
</div>
</section>

<script>
function updateUPDRTC(element) {
var xhr = new XMLHttpRequest();
var updRTC = document.getElementById("datetimeRTC").value;
console.log(updRTC);
xhr.open("GET", "/updatertc?value="+updRTC, true);
xhr.send();
}

</script>
</section>
<script>
  const toggle = document.querySelector('#toggle1');
  const updateBackground = (event) => { 
  document.body.classList.toggle1('on');
}

toggle.addEventListener("click", () => document.body.classList.toggle('on') , false);
  function updateSliderPWM(element) {
              var xhr = new XMLHttpRequest();
              var sliderValue = document.getElementById("pwmSlider").value;
              document.getElementById("textSliderValue").innerHTML = sliderValue;
              console.log(sliderValue);
              xhr.open("GET", "/slider?value="+sliderValue, true);
              xhr.send();
            }
            

</script>

</body>
</html>